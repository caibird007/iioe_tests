config:
    name: "thing testcase"
    variables:
        edge_thing_name: "edge_thing_httpruner"
        end_thing_name: "end_thing_httprunner"
        end_type: 1
        edge_type: 2
        token: ${ENV(token)}
    "setup_hooks": [
        "${sleep(1)}"
    ]
    "teardown_hooks": [
        "${sleep(1)}"
    ]
    output:
        - created_edge_thing_id
        - created_end_thing_id

teststeps:


-
    name: search edge thing 
    api: api/thing_list.yml
    variables:
        search: $edge_thing_name
        type: $edge_type
    extract:
        created_edge_thing_id: content.data.data.0.id
    validate:
        - eq: ["status_code", 200]
    "teardown_hooks": [
        "${sleep(0.2)}"
    ]


-
    name: search end thing 
    api: api/thing_list.yml
    variables:
        search: $end_thing_name
        type: $end_type
    extract:
        created_end_thing_id: content.data.data.0.id
    validate:
        - eq: ["status_code", 200]
    "teardown_hooks": [
        "${sleep(0.2)}"
    ]