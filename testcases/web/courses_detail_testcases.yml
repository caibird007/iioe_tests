config:
    name: "测试课程详情页所有可点击部分的接口"
    variables:
        token: ${ENV(token)}
        name_cn: '人工智能技术现状与未来'
        name_en: '人工智能技术现状与未来'
        name_fr: '人工智能技术现状与未来'
        categoryName_cn: '其他'
        categoryName_en: 'Others'
        categoryName_fr: 'Autres'
    "setup_hooks": [
        "${sleep(1)}"
    ]
    "teardown_hooks": [
        "${sleep(1)}"
    ]
    #export:
    #    - created_edge_thing_id
    #    - created_end_thing_id

teststeps:

-
    name: "课程详情验证(中文)" 
    api: api/web/courses_details.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'zh-CN'
    extract:
        courseDetailList: content.courseDetailList
        courseTeacherList: content.courseTeacherList
    validate:
        - eq: ["status_code", 200]
        - eq: ["content.name", $name_cn]
        - eq: ["content.status", 'OPEN']
        - ge: ["${get_list_len(courseDetailList)}", 0]
        - ge: ["${get_list_len(courseTeacherList)}", 0]
        - eq: ["content.categoryName", $categoryName_cn]
        - eq: ["content.languageCode", "cn"]
        - eq: ["content.languageName", "中文"]

-
    name: "课程详情验证(英文)" 
    api: api/web/courses_details.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'en-US'
    validate: 
        - eq: ["status_code", 200]
        - eq: ["content.name", $name_cn]
        - eq: ["content.status", 'OPEN']
        - ge: ["${get_list_len(courseDetailList)}", 0]
        - ge: ["${get_list_len(courseTeacherList)}", 0]
        - eq: ["content.categoryName", $categoryName_en]
        - eq: ["content.languageCode", "cn"]
        - eq: ["content.languageName", "Chinese"]

-
    name: "课程详情验证(法文)" 
    api: api/web/courses_details.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'fr-FR'
    validate: 
        - eq: ["status_code", 200]
        - eq: ["content.name", $name_cn]
        - eq: ["content.status", 'OPEN']
        - ge: ["${get_list_len(courseDetailList)}", 0]
        - ge: ["${get_list_len(courseTeacherList)}", 0]
        - eq: ["content.categoryName", $categoryName_fr]
        - eq: ["content.languageCode", "cn"]
        - eq: ["content.languageName", "chinois"]

-
    name: "获取课程评论(评论前)"
    api: api/web/get_course_comments.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'zh-CN'
    extract:
        comment_contents_before: content.content
    validate:
        - eq: ["status_code", 200]

-
    name: "评论课程"
    api: api/web/make_course_comments.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'zh-CN'
        content: '测试httprunner2'
    validate:
        - eq: ["status_code", 200]

-
    name: "获取课程评论(评论后)"
    api: api/web/get_course_comments.yml
    variables:
        course_id: '7a397068-b5d1-4afa-bc39-9fd125a02d7b'
        lang: 'zh-CN'
        content: '测试httprunner2'
    extract:
        comment_contents_after: content.content
    validate:
        - eq: ["status_code", 200]
        - eq: ["content.content.0.content", $content]
        #- gt: ["${get_list_len($comment_contents_after)}", "${get_list_len($comment_contents_before)}" ]

-
    name: "查看课程站章节"
    api: api/web/get_course_subtitles.yml
    variables:
        course_lesson_id: cdf6de84-ce56-40f7-ba42-87cd44e14e1d
        lang: 'zh-CN'
    validate:
        - eq: ["status_code", 200]

-
    name: "查看视频课程问题"
    api: api/web/get_course_video.yml
    variables:
        video_id: cdf6de84-ce56-40f7-ba42-87cd44e14e1d
        lang: 'zh-CN'
    validate:
        - eq: ["status_code", 200]


